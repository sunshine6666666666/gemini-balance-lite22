#!/bin/bash

# ä¸€é”®è¿è¡Œæ‰€æœ‰æµ‹è¯•
# æ•ˆç‡ç¬¬ä¸€ï¼Œç®€å•ç›´æ¥

echo "ğŸš€ å¼€å§‹æ‰§è¡Œæ‰€æœ‰APIæµ‹è¯•..."
echo "=================================="
echo ""

# æ£€æŸ¥æœ¬åœ°æœåŠ¡æ˜¯å¦è¿è¡Œ
echo "ğŸ” æ£€æŸ¥æœ¬åœ°æœåŠ¡çŠ¶æ€..."
if curl -s --max-time 3 "http://localhost:3000/" > /dev/null 2>&1; then
    echo "âœ… æœ¬åœ°æœåŠ¡è¿è¡Œä¸­"
    echo ""
    
    echo "ğŸ“ æ‰§è¡Œæœ¬åœ°ç¯å¢ƒæµ‹è¯•..."
    echo "=================================="
    bash tests/local/test-api.sh
    echo ""
else
    echo "âŒ æœ¬åœ°æœåŠ¡æœªè¿è¡Œï¼Œè·³è¿‡æœ¬åœ°æµ‹è¯•"
    echo "ğŸ’¡ è¯·å…ˆè¿è¡Œ: npm run dev"
    echo ""
fi

echo "ğŸ“ æ‰§è¡Œé¢„è§ˆç¯å¢ƒæµ‹è¯•..."
echo "=================================="
bash tests/preview/test-api.sh
echo ""

echo "ğŸ¯ æ‰€æœ‰æµ‹è¯•æ‰§è¡Œå®Œæˆï¼"
echo "=================================="
