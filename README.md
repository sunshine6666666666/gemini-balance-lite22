# Gemini Balance Lite 22
# Gemini API ä»£ç†å’Œè´Ÿè½½å‡è¡¡æ— æœåŠ¡å™¨è½»é‡ç‰ˆï¼ˆå¢å¼ºç‰ˆï¼‰

### åŸºäºæŠ€æœ¯çˆ¬çˆ¬è™¾åŸç‰ˆä¼˜åŒ–
åŸä½œè€…ï¼š[æŠ€æœ¯çˆ¬çˆ¬è™¾](https://space.bilibili.com/316183842)
ä¼˜åŒ–ç‰ˆæœ¬ï¼š[sunshine6666666666](https://github.com/sunshine6666666666)

## ğŸš€ æ–°ç‰¹æ€§

- **45ç§’è¶…æ—¶æœºåˆ¶**ï¼šé€‚åº”å¤§æ•°æ®é‡LLMè¯·æ±‚å¤„ç†
- **æ™ºèƒ½æ•…éšœåˆ‡æ¢**ï¼šé‡åˆ°ä»»ä½•é”™è¯¯ç«‹å³åˆ‡æ¢API Key
- **ä¿æŒè½®è¯¢ç‰¹è‰²**ï¼šæ—¶é—´çª—å£è½®è¯¢ç®—æ³•ç¡®ä¿è´Ÿè½½å‡è¡¡
- **504å¿«é€Ÿåˆ‡æ¢**ï¼šæ£€æµ‹åˆ°504ç½‘å…³è¶…æ—¶ç«‹å³æ¢Key
- **é›¶å»¶è¿Ÿåˆ‡æ¢**ï¼šç§»é™¤é‡è¯•å»¶è¿Ÿï¼Œæå‡å“åº”é€Ÿåº¦

## é¡¹ç›®ç®€ä»‹

Gemini API ä»£ç†æœåŠ¡ï¼Œä½¿ç”¨è¾¹ç¼˜å‡½æ•°æŠŠGemini APIå…è´¹ä¸­è½¬åˆ°å›½å†…ã€‚èšåˆå¤šä¸ªGemini API Keyï¼Œä½¿ç”¨æ—¶é—´çª—å£è½®è¯¢ç®—æ³•å®ç°æ™ºèƒ½è´Ÿè½½å‡è¡¡ï¼Œå¤§å¹…æå‡APIå¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚

## Verceléƒ¨ç½²(æ¨è)
[![Deploy to Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/sunshine6666666666/gemini-balance-lite22)


### å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

1. **ä¸€é”®éƒ¨ç½²**ï¼šç‚¹å‡»ä¸Šæ–¹éƒ¨ç½²æŒ‰é’®â¬†ï¸
2. **Forkä»“åº“**ï¼šé€‰æ‹©Forkåˆ°ä½ çš„GitHubè´¦æˆ·
3. **é…ç½®é¡¹ç›®**ï¼šVercelä¼šè‡ªåŠ¨æ£€æµ‹é¡¹ç›®é…ç½®
4. **éƒ¨ç½²å®Œæˆ**ï¼šç­‰å¾…éƒ¨ç½²å®Œæˆï¼Œè·å¾—åˆ†é…çš„åŸŸå

### é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå›½å†…ç”¨æˆ·å¿…éœ€ï¼‰

1. åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸå
2. é…ç½®DNSè§£ææŒ‡å‘Vercel
    <details>
    <summary>é…ç½®è‡ªå®šä¹‰åŸŸåè¯¦ç»†æ­¥éª¤ï¼š</summary>

    ![image](/docs/images/5.png)
    </details>

### è·å–API Key

1. è®¿é—® [Google AI Studio](https://aistudio.google.com) ç”³è¯·å…è´¹Gemini API Key
2. æ”¯æŒå¤šä¸ªAPI Keyï¼Œç”¨é€—å·åˆ†éš”ï¼š`key1,key2,key3`
3. åœ¨AIå®¢æˆ·ç«¯ä¸­é…ç½®ä½ çš„åŸŸåå’ŒAPI Key

    <details>
    <summary>ä»¥Cherry Studioä¸ºä¾‹ï¼š</summary>

    ![image](/docs/images/2.png)
    </details>

### ç¯å¢ƒå˜é‡é…ç½®

#### ğŸ¯ è´Ÿè½½å‡è¡¡é…ç½®ï¼ˆæ¨èï¼‰

ä¸ºäº†è§£å†³Cherry Studioç­‰å®¢æˆ·ç«¯å•API Keyé…é¢é™åˆ¶é—®é¢˜ï¼Œå»ºè®®é…ç½®å¤‡ç”¨API Keyæ± ï¼š

**Verceléƒ¨ç½²é…ç½®ï¼š**
1. è¿›å…¥Vercelé¡¹ç›®Dashboard
2. ç‚¹å‡» **Settings** â†’ **Environment Variables**
3. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```
Name: BACKUP_API_KEYS
Value: your_api_key_1,your_api_key_2,your_api_key_3,your_api_key_4,your_api_key_5
Environment: Production, Preview, Development (å…¨é€‰)
```

**æœ¬åœ°å¼€å‘é…ç½®ï¼š**
1. å¤åˆ¶ `.env.sample` ä¸º `.env`
2. å¡«å…¥æ‚¨çš„API Keysï¼š

```bash
cp .env.sample .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥å®é™…çš„API Keys
```

#### å…¶ä»–å¯é€‰é…ç½®

- `CUSTOM_LLM_API_KEY`ï¼šè‡ªå®šä¹‰LLMæœåŠ¡çš„API Key
- `CUSTOM_LLM_BASE_URL`ï¼šè‡ªå®šä¹‰LLMæœåŠ¡çš„åŸºç¡€URL

#### ğŸ”§ è´Ÿè½½å‡è¡¡å·¥ä½œåŸç†

- **å®¢æˆ·ç«¯å‘é€å•ä¸ªAPI Key** â†’ ç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨å¤‡ç”¨Keyæ± è¿›è¡Œè´Ÿè½½å‡è¡¡
- **å®¢æˆ·ç«¯å‘é€å¤šä¸ªAPI Key** â†’ ä½¿ç”¨å®¢æˆ·ç«¯æä¾›çš„Keys
- **æ™ºèƒ½æ•…éšœåˆ‡æ¢** â†’ é‡åˆ°é…é¢é™åˆ¶è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªKey
- **æ—¶é—´çª—å£è½®è¯¢** â†’ ç¡®ä¿API Keyä½¿ç”¨å‡åŒ€åˆ†å¸ƒ




## Denoéƒ¨ç½²

1. [fork](https://github.com/tech-shrimp/gemini-balance-lite/fork)æœ¬é¡¹ç›®
2. ç™»å½•/æ³¨å†Œ https://dash.deno.com/
3. åˆ›å»ºé¡¹ç›® https://dash.deno.com/new_project
4. é€‰æ‹©æ­¤é¡¹ç›®ï¼Œå¡«å†™é¡¹ç›®åå­—ï¼ˆè¯·ä»”ç»†å¡«å†™é¡¹ç›®åå­—ï¼Œå…³ç³»åˆ°è‡ªåŠ¨åˆ†é…çš„åŸŸåï¼‰
5. Entrypoint å¡«å†™ `src/deno_index.ts` å…¶ä»–å­—æ®µç•™ç©º 
   <details>
   <summary>å¦‚å›¾</summary>
   
   ![image](/docs/images/3.png)
   </details>
6. ç‚¹å‡» <b>Deploy Project</b>
7. éƒ¨ç½²æˆåŠŸåè·å¾—åŸŸå
8. å›½å†…ä½¿ç”¨éœ€è¦é…ç½®è‡ªå®šä¹‰åŸŸå
9. å»[AIStudio](https://aistudio.google.com)ç”³è¯·ä¸€ä¸ªå…è´¹Gemini API Key
10. å°†API Keyä¸åˆ†é…çš„åŸŸåå¡«å…¥AIå®¢æˆ·ç«¯å³å¯ä½¿ç”¨ï¼Œå¦‚æœæœ‰å¤šä¸ªAPI Keyç”¨é€—å·åˆ†éš”

<details>
<summary>ä»¥Cherry Studioä¸ºä¾‹ï¼š</summary>

![image](/docs/images/2.png)
</details>


## Cloudflare Worker éƒ¨ç½²
[![Deploy to Cloudflare Workers](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/tech-shrimp/gemini-balance-lite)

0. CF Workeræœ‰å¯èƒ½ä¼šåˆ†é…é¦™æ¸¯çš„CDNèŠ‚ç‚¹å¯¼è‡´æ— æ³•ä½¿ç”¨(Geminiä¸å…è®¸é¦™æ¸¯IPè¿æ¥)
0. å¹¿ä¸œåœ°åŒºä¸å»ºè®®ä½¿ç”¨Cloudflare Worker éƒ¨ç½²
1. ç‚¹å‡»éƒ¨ç½²æŒ‰é’®
2. ç™»å½•Cloudflareè´¦å·
3. é“¾æ¥Githubè´¦æˆ·ï¼Œéƒ¨ç½²
4. æ‰“å¼€dash.cloudflare.comï¼ŒæŸ¥çœ‹éƒ¨ç½²åçš„worker
6. å›½å†…ä½¿ç”¨éœ€è¦é…ç½®è‡ªå®šä¹‰åŸŸå
<details>
<summary>é…ç½®è‡ªå®šä¹‰åŸŸåï¼š</summary>

![image](/docs/images/4.png)
</details>


## Netlifyéƒ¨ç½²
[![Deploy to Netlify](https://www.netlify.com/img/deploy/button.svg)](https://app.netlify.com/start/deploy?repository=https://github.com/tech-shrimp/gemini-balance-lite)
<br>ç‚¹å‡»éƒ¨ç½²æŒ‰é’®ï¼Œç™»å½•Githubè´¦æˆ·å³å¯
<br>å…è´¹åˆ†é…åŸŸåï¼Œå›½å†…å¯ç›´è¿ã€‚
<br>ä½†æ˜¯ä¸ç¨³å®š

<details>
<summary>å°†åˆ†é…çš„åŸŸåå¤åˆ¶ä¸‹æ¥ï¼Œå¦‚å›¾ï¼š</summary>

![image](/docs/images/1.png)
</details>

å»[AIStudio](https://aistudio.google.com)ç”³è¯·ä¸€ä¸ªå…è´¹Gemini API Key
<br>å°†API Keyä¸åˆ†é…çš„åŸŸåå¡«å…¥AIå®¢æˆ·ç«¯å³å¯ä½¿ç”¨ï¼Œå¦‚æœæœ‰å¤šä¸ªAPI Keyç”¨é€—å·åˆ†éš”

<details>
<summary>ä»¥Cherry Studioä¸ºä¾‹ï¼š</summary>

![image](/docs/images/2.png)
</details>



## æ‰“èµ
#### å¸®å¿™ç‚¹ç‚¹å…³æ³¨ç‚¹ç‚¹èµï¼Œè°¢è°¢å•¦~
Bç«™ï¼š[https://space.bilibili.com/316183842](https://space.bilibili.com/316183842)<br>
Youtube: [https://www.youtube.com/@Tech_Shrimp](https://www.youtube.com/@Tech_Shrimp)


## æœ¬åœ°è°ƒè¯•

1. å®‰è£…NodeJs
2. npm install -g vercel
3. cd é¡¹ç›®æ ¹ç›®å½•
4. vercel dev

## API è¯´æ˜


### Gemini ä»£ç†

å¯ä»¥ä½¿ç”¨ Gemini çš„åŸç”Ÿ API æ ¼å¼è¿›è¡Œä»£ç†è¯·æ±‚ã€‚
**Curl ç¤ºä¾‹:**
```bash
curl --location 'https://<YOUR_DEPLOYED_DOMAIN>/v1beta/models/gemini-2.5-pro:generateContent' \
--header 'Content-Type: application/json' \
--header 'x-goog-api-key: <YOUR_GEMINI_API_KEY_1>,<YOUR_GEMINI_API_KEY_2>' \
--data '{
    "contents": [
        {
         "role": "user",
         "parts": [
            {
               "text": "Hello"
            }
         ]
      }
    ]
}'
```
**Curl ç¤ºä¾‹:ï¼ˆæµå¼ï¼‰**
```bash
curl --location 'https://<YOUR_DEPLOYED_DOMAIN>/v1beta/models/gemini-2.5-pro:generateContent?alt=sse' \
--header 'Content-Type: application/json' \
--header 'x-goog-api-key: <YOUR_GEMINI_API_KEY_1>,<YOUR_GEMINI_API_KEY_2>' \
--data '{
    "contents": [
        {
         "role": "user",
         "parts": [
            {
               "text": "Hello"
            }
         ]
      }
    ]
}'
```
> æ³¨æ„: è¯·å°† `<YOUR_DEPLOYED_DOMAIN>` æ›¿æ¢ä¸ºä½ çš„éƒ¨ç½²åŸŸåï¼Œå¹¶å°† `<YOUR_GEMINI_API_KEY>` æ›¿æ¢ä¸ºä½ çš„ Gemini API Keï¼Œå¦‚æœæœ‰å¤šä¸ªç”¨é€—å·åˆ†éš”


### API Key æ ¡éªŒ

å¯ä»¥é€šè¿‡å‘ `/verify` ç«¯ç‚¹å‘é€è¯·æ±‚æ¥æ ¡éªŒä½ çš„ API Key æ˜¯å¦æœ‰æ•ˆã€‚å¯ä»¥ä¸€æ¬¡æ€§æ ¡éªŒå¤šä¸ª Keyï¼Œç”¨é€—å·éš”å¼€ã€‚

**Curl ç¤ºä¾‹:**
```bash
curl --location 'https://<YOUR_DEPLOYED_DOMAIN>/verify' \
--header 'x-goog-api-key: <YOUR_GEMINI_API_KEY_1>,<YOUR_GEMINI_API_KEY_2>'
```

### OpenAI æ ¼å¼

æœ¬é¡¹ç›®å…¼å®¹ OpenAI çš„ API æ ¼å¼ï¼Œä½ å¯ä»¥é€šè¿‡ `/chat` æˆ– `/chat/completions` ç«¯ç‚¹æ¥å‘é€è¯·æ±‚ã€‚

**Curl ç¤ºä¾‹:**
```bash
curl --location 'https://<YOUR_DEPLOYED_DOMAIN>/chat/completions' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer <YOUR_GEMINI_API_KEY>' \
--data '{
    "model": "gpt-3.5-turbo",
    "messages": [
        {
            "role": "user",
            "content": "ä½ å¥½"
        }
    ]
}'
```

